
    
  <scroll-view class="chat-container" scroll-y id="scroll"
  scroll-into-view="{{lastMessageId}}" scroll-top="0" scroll-y="true" style='height:calc( {{height}} - 39px)' >
    <view wx:for="{{message}}" wx:for-item="item" wx:key="id" id="{{item.id}}" class="message {{item.style}}">
      <view wx:if="{{item.style == MESSAGE_TEXT}}" class="user-message {{item.is_teacher ? 'other' : 'me'}}">
          <image class="avatar" src="{{item.avatar_url}}" mode="aspectFill"></image>
          <view class="text">
              <view class="nickname">{{item.nick_name}}</view>
              <view class="content">{{item.content}}</view>
          </view>
      </view>
      <!-- <view wx:if="{{item.style == 'system'}}" class="system-message">
          {{item.content}}
      </view> -->

    </view>
    <view style='height:10px'></view>
  </scroll-view>


  <!--提交框-->
    <view  class="footer">
         <!-- <view  class="btn btn_scroll "  catchtap='openScroll'wx:if="{{pusher}}" >模式</view>  -->
         
        <view  class="btn btn_left"  catchtap='setAudioMode' >
          <label wx:if="{{isAudioMode}}">键盘</label>
          <label wx:else>语音</label>        
        </view> 

        <button class="footinput"  wx:if="{{isAudioMode}}" 
            bindtouchstart='audioStart'
            bindtouchmove="audioMove"
            bindtouchend="audioEnd"
          >长按</button>
        <view  class="footinput" wx:else>
                <input bindinput="inputValue"  value="{{inputValue}}" type="text" />
        </view>
        <!-- <view  class="footinput"> -->
        <!-- </view> -->

        <view  class="btn btn_send" hover-class='send_hover' catchtap='send' wx:if="{{inputValue != ''}}">发送</view> 
        <block wx:else>
         <view  class="btn btn_right" catchtap='closeScroll' wx:if="{{isScroll}}">滚动</view> 
         <view  class="btn btn_right no_scroll"  catchtap='openScroll' wx:else>滚动</view> 
        </block>
         <!-- <view  class="btn btn_send" hover-class='send_hover' catchtap='send'>发送</view>  -->
    </view> 
 